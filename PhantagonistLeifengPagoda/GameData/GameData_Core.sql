--------------------
-- Basics
--------------------

INSERT INTO Types
		(Type,								Kind)
VALUES	('BUILDING_PHANTA_LEIFENG_PAGODA',	'KIND_BUILDING');

INSERT INTO Buildings
		(BuildingType,
		Name,
		Description,
		PrereqTech,
		AdjacentDistrict,
		AdjacentImprovement,
		Cost,
		AdvisorType,
		MaxWorldInstances,
		IsWonder,
		RequiresPlacement,
		ObsoleteEra,
		Quote)
VALUES	('BUILDING_PHANTA_LEIFENG_PAGODA',
		'LOC_BUILDING_PHANTA_LEIFENG_PAGODA_NAME',
		'LOC_BUILDING_PHANTA_LEIFENG_PAGODA_DESCRIPTION',
		'TECH_BUTTRESS',
		'DISTRICT_HOLY_SITE',
		'IMPROVEMENT_FISHING_BOATS',
		710,
		'ADVISOR_RELIGIOUS',
		1,
		1,
		1,
		'ERA_INDUSTRIAL',
		'LOC_BUILDING_PHANTA_LEIFENG_PAGODA_QUOTE');

INSERT INTO BuildingPrereqs
		(Building,							PrereqBuilding)
VALUES ('BUILDING_PHANTA_LEIFENG_PAGODA',	'BUILDING_TEMPLE');

INSERT INTO Building_GreatWorks
		(BuildingType,						GreatWorkSlotType,			NumSlots)
VALUES	('BUILDING_PHANTA_LEIFENG_PAGODA',	'GREATWORKSLOT_WRITING',	1),
		('BUILDING_PHANTA_LEIFENG_PAGODA',	'GREATWORKSLOT_RELIC',		1);

--INSERT INTO BuildingPrereqs
--		(Building,							PrereqBuilding)
--VALUES	('BUILDING_PHANTA_LEIFENG_PAGODA',	'BUILDING_TEMPLE');

--INSERT INTO Building_ValidTerrains
--		(BuildingType,						TerrainType)
--VALUES	('BUILDING_PHANTA_LEIFENG_PAGODA',	'TERRAIN_GRASS_HILLS'),
--		('BUILDING_PHANTA_LEIFENG_PAGODA',	'TERRAIN_PLAINS_HILLS'),
--		('BUILDING_PHANTA_LEIFENG_PAGODA',	'TERRAIN_DESERT_HILLS'),
--		('BUILDING_PHANTA_LEIFENG_PAGODA',	'TERRAIN_TUNDRA_HILLS'),
--		('BUILDING_PHANTA_LEIFENG_PAGODA',	'TERRAIN_SNOW_HILLS');

--------------------
-- Bonuses
--------------------

--==== 1: Receive a free Builder when purchasing an Apostle.

INSERT INTO BuildingModifiers (BuildingType, ModifierId) VALUES 
('BUILDING_PHANTA_LEIFENG_PAGODA', 'MODFEAT_PHANTA_LEIFENG_PAGODA_GRANT_BUILDER_ATTACH');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('MODFEAT_PHANTA_LEIFENG_PAGODA_GRANT_BUILDER_ATTACH', 'MODTYPE_PHANTA_LEIFENG_PAGODA_PLAYER_TRAINED_UNITS_ATTACH_MODIFIER', 0, 0, 0, NULL, 'REQSET_PHANTA_LEIFENG_PAGODA_UNIT_IS_APOSTLE'),
('MODFEAT_PHANTA_LEIFENG_PAGODA_GRANT_BUILDER', 'MODIFIER_SINGLE_CITY_GRANT_UNIT_IN_NEAREST_CITY', 1, 1, 0, NULL, NULL);

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('MODFEAT_PHANTA_LEIFENG_PAGODA_GRANT_BUILDER_ATTACH', 'ModifierId', 'MODFEAT_PHANTA_LEIFENG_PAGODA_GRANT_BUILDER'),
('MODFEAT_PHANTA_LEIFENG_PAGODA_GRANT_BUILDER', 'AllowUniqueOverride', 'true'), 
('MODFEAT_PHANTA_LEIFENG_PAGODA_GRANT_BUILDER', 'Amount', '1'), 
('MODFEAT_PHANTA_LEIFENG_PAGODA_GRANT_BUILDER', 'UnitType', 'UNIT_BUILDER');

-- Custom ModifierType

INSERT INTO Types (Type, Kind) VALUES 
('MODTYPE_PHANTA_LEIFENG_PAGODA_PLAYER_TRAINED_UNITS_ATTACH_MODIFIER', 'KIND_MODIFIER');

INSERT INTO DynamicModifiers (ModifierType, CollectionType, EffectType) VALUES 
('MODTYPE_PHANTA_LEIFENG_PAGODA_PLAYER_TRAINED_UNITS_ATTACH_MODIFIER', 'COLLECTION_PLAYER_TRAINED_UNITS', 'EFFECT_ATTACH_MODIFIER');

-- RequirementSets

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES 
('REQSET_PHANTA_LEIFENG_PAGODA_UNIT_IS_APOSTLE', 'REQUIREMENTSET_TEST_ANY');

INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES 
('REQSET_PHANTA_LEIFENG_PAGODA_UNIT_IS_APOSTLE', 'REQ_PHANTA_LEIFENG_PAGODA_UNIT_IS_APOSTLE');

-- Requirements

INSERT INTO Requirements (RequirementId, RequirementType) VALUES 
('REQ_PHANTA_LEIFENG_PAGODA_UNIT_IS_APOSTLE', 'REQUIREMENT_UNIT_TYPE_MATCHES');

INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES 
('REQ_PHANTA_LEIFENG_PAGODA_UNIT_IS_APOSTLE', 'UnitType', 'UNIT_APOSTLE');

--==== 2: +1 Food and +1 Faith to Improvements on Lakes or Breathtaking tiles.

INSERT INTO BuildingModifiers (BuildingType, ModifierId) VALUES 
('BUILDING_PHANTA_LEIFENG_PAGODA', 'MODFEAT_PHANTA_LEIFENG_PAGODA_FOOD'),
('BUILDING_PHANTA_LEIFENG_PAGODA', 'MODFEAT_PHANTA_LEIFENG_PAGODA_FAITH');

INSERT INTO Modifiers (ModifierId, ModifierType, RunOnce, Permanent, NewOnly, OwnerRequirementSetId, SubjectRequirementSetId) VALUES 
('MODFEAT_PHANTA_LEIFENG_PAGODA_FOOD', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 0, 0, 0, NULL, 'REQSET_PHANTA_LEIFENG_PAGODA_PLOTS'),
('MODFEAT_PHANTA_LEIFENG_PAGODA_FAITH', 'MODIFIER_PLAYER_ADJUST_PLOT_YIELD', 0, 0, 0, NULL, 'REQSET_PHANTA_LEIFENG_PAGODA_PLOTS');

INSERT INTO ModifierArguments (ModifierId, Name, Value) VALUES 
('MODFEAT_PHANTA_LEIFENG_PAGODA_FOOD', 'Amount', '2'), 
('MODFEAT_PHANTA_LEIFENG_PAGODA_FOOD', 'YieldType', 'YIELD_FOOD'),
('MODFEAT_PHANTA_LEIFENG_PAGODA_FAITH', 'Amount', '1'), 
('MODFEAT_PHANTA_LEIFENG_PAGODA_FAITH', 'YieldType', 'YIELD_FAITH');

-- RequirementSets

INSERT INTO RequirementSets (RequirementSetId, RequirementSetType) VALUES 
('REQSET_PHANTA_LEIFENG_PAGODA_PLOTS', 'REQUIREMENTSET_TEST_ALL'),
('REQSET_PHANTA_LEIFENG_PAGODA_LAKE_OR_BREATHTAKING', 'REQUIREMENTSET_TEST_ANY');

INSERT INTO RequirementSetRequirements (RequirementSetId, RequirementId) VALUES 
('REQSET_PHANTA_LEIFENG_PAGODA_PLOTS', 'REQ_PHANTA_LEIFENG_PAGODA_LAKE_OR_BREATHTAKING'), 
('REQSET_PHANTA_LEIFENG_PAGODA_PLOTS', 'REQ_PHANTA_LEIFENG_PAGODA_PLOT_HAS_ANY_IMPROVEMENT'),
('REQSET_PHANTA_LEIFENG_PAGODA_LAKE_OR_BREATHTAKING', 'REQUIRES_PLOT_IS_LAKE'), 
('REQSET_PHANTA_LEIFENG_PAGODA_LAKE_OR_BREATHTAKING', 'REQUIRES_PLOT_BREATHTAKING_APPEAL');

-- Requirements

INSERT INTO Requirements (RequirementId, RequirementType) VALUES 
('REQ_PHANTA_LEIFENG_PAGODA_LAKE_OR_BREATHTAKING', 'REQUIREMENT_REQUIREMENTSET_IS_MET'), 
('REQ_PHANTA_LEIFENG_PAGODA_PLOT_HAS_ANY_IMPROVEMENT', 'REQUIREMENT_PLOT_HAS_ANY_IMPROVEMENT');

INSERT INTO RequirementArguments (RequirementId, Name, Value) VALUES 
('REQ_PHANTA_LEIFENG_PAGODA_LAKE_OR_BREATHTAKING', 'RequirementSetId', 'REQSET_PHANTA_LEIFENG_PAGODA_LAKE_OR_BREATHTAKING');
