-- ffs this mod keeps growing

-- Alright so the idea is simple,
-- Every improved bonus resource at a city increases the domestic trade route yields it provides when it is the destination depending on the buildings of its city.
-- The bonus also changes depending on what building you use:
-- For food and production you use:
---- Granary
---- Water Mill
---- Shipyard
---- General Store (renamed Food Market, mostly because I felt weird giving the production boost to it and I didnt want to add a new building just for this)
-- For gold you use:
---- Brewery (new building, mutually exclusive with Granary)
---- River Port (new building, mutually exclusive with Water Mill)
---- Bank
---- Shopping Mall

-- As a personal note because trade modifiers are always friggin' confusing
-- the modifier we are attaching to the city is a MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS which has the following arguments
-- YieldType,
-- Amount
-- Domestic (should be 1 for this)

-- for the Shopping mall we use instead MODIFIER_CITY_ADJUST_TRADE_ROUTE_YIELD_PER_DESTINATION_LUXURY_FOR_INTERNATIONAL which was added for Torre de Belem
-- EFFECT_ADJUST_CITY_TRADE_ROUTE_YIELD_PER_DESTINATION_LUXURY_RESOURCE_FOR_INTERNATIONAL
-- YieldType
-- Amount

-- alright lets do this


INSERT INTO Types
		(Type,							Kind)
VALUES	('BUILDING_LEU_RIVER_PORT',		'KIND_BUILDING'),
		('BUILDING_LEU_BREWERY',		'KIND_BUILDING');

INSERT INTO Buildings
		(BuildingType,
		Name,
		Description,
		PrereqTech,
		Cost,
		PrereqDistrict,
		RequiresAdjacentRiver,
		Entertainment,
		PurchaseYield,
		AdvisorType)
VALUES	(
		/*BuildingType*/			'BUILDING_LEU_RIVER_PORT',
		/*Name,*/					'LOC_BUILDING_LEU_RIVER_PORT_NAME',
		/*Description,*/			'LOC_BUILDING_LEU_RIVER_PORT_DESCRIPTION',
		/*PrereqTech,*/				'TECH_MASONRY',
		/*Cost,*/					80,
		/*PrereqDistrict,*/			'DISTRICT_CITY_CENTER',
		/*RequiresAdjacentRiver,*/	1,
		/*Entertainment,*/			0,
		/*PurchaseYield,*/			'YIELD_GOLD',
		/*AdvisorType*/				'ADVISOR_GENERIC'
		)
		,
		(
		/*BuildingType*/			'BUILDING_LEU_BREWERY',
		/*Name,*/					'LOC_BUILDING_LEU_BREWERY_NAME',
		/*Description,*/			'LOC_BUILDING_LEU_BREWERY_DESCRIPTION',
		/*PrereqTech,*/				'TECH_POTTERY',
		/*Cost,*/					65,
		/*PrereqDistrict,*/			'DISTRICT_CITY_CENTER',
		/*RequiresAdjacentRiver,*/	0,
		/*Entertainment,*/			1,
		/*PurchaseYield,*/			'YIELD_GOLD',
		/*AdvisorType*/				'ADVISOR_GENERIC'
		)
		;

--UPDATE Buildings
--SET PrereqTech = 'TECH_ENGINEERING'
--WHERE BuildingType = 'BUILDING_WATER_MILL';

UPDATE Buildings
SET Description = 'LOC_BUILDING_GRANARY_DESCRIPTION'
WHERE BuildingType = 'BUILDING_GRANARY';

INSERT INTO Building_YieldChanges
		(BuildingType,					YieldType,				YieldChange)
VALUES	('BUILDING_LEU_RIVER_PORT',		'YIELD_GOLD',			1),
		('BUILDING_LEU_RIVER_PORT',		'YIELD_PRODUCTION',		1),
		('BUILDING_LEU_BREWERY',		'YIELD_GOLD',			1);

INSERT INTO MutuallyExclusiveBuildings
		(Building,						MutuallyExclusiveBuilding)
VALUES	('BUILDING_LEU_RIVER_PORT',		'BUILDING_WATER_MILL'),
		('BUILDING_WATER_MILL',			'BUILDING_LEU_RIVER_PORT'),
		--
		('BUILDING_LEU_BREWERY',		'BUILDING_GRANARY'),
		('BUILDING_GRANARY',			'BUILDING_LEU_BREWERY');

INSERT INTO MutuallyExclusiveBuildings
		(Building,						MutuallyExclusiveBuilding)
SELECT	'BUILDING_LEU_RIVER_PORT',		CivUniqueBuildingType			FROM BuildingReplaces WHERE ReplacesBuildingType = 'BUILDING_WATER_MILL'	UNION ALL 
SELECT	CivUniqueBuildingType,			'BUILDING_LEU_RIVER_PORT'		FROM BuildingReplaces WHERE ReplacesBuildingType = 'BUILDING_WATER_MILL'	UNION ALL
SELECT	'BUILDING_LEU_BREWERY',			CivUniqueBuildingType			FROM BuildingReplaces WHERE ReplacesBuildingType = 'BUILDING_GRANARY'		UNION ALL 
SELECT	CivUniqueBuildingType,			'BUILDING_LEU_BREWERY'			FROM BuildingReplaces WHERE ReplacesBuildingType = 'BUILDING_GRANARY';

INSERT INTO BuildingModifiers
		(BuildingType,					ModifierId)
VALUES	('BUILDING_LEU_RIVER_PORT',		'LEU_RIVER_PORT_BONUS_FISHING_BOAT_GOLD'),
		('BUILDING_FOOD_MARKET',		'LEU_FOOD_MARKET_PRODUCTION_FROM_POPULATION');

INSERT INTO Building_YieldChangesBonusWithPower
		(BuildingType,					YieldType,				YieldChange)
VALUES	('BUILDING_FOOD_MARKET',		'YIELD_PRODUCTION',		2);

INSERT INTO ImprovementModifiers
		(ImprovementType,				ModifierID)
VALUES	('IMPROVEMENT_FARM',			'LEU_GRANARY_FOOD_TRADE'),
		('IMPROVEMENT_FARM',			'LEU_WATER_MILL_FOOD_TRADE'),
		('IMPROVEMENT_FARM',			'LEU_FOOD_MARKET_FOOD_TRADE'),
		('IMPROVEMENT_FARM',			'LEU_BREWERY_GOLD_TRADE'),
		('IMPROVEMENT_FARM',			'LEU_RIVER_PORT_GOLD_TRADE'),
		('IMPROVEMENT_FARM',			'LEU_SHOPPING_MALL_GOLD_TRADE'),
		--
		('IMPROVEMENT_PLANTATION',		'LEU_GRANARY_FOOD_TRADE'),
		('IMPROVEMENT_PLANTATION',		'LEU_WATER_MILL_FOOD_TRADE'),
		('IMPROVEMENT_PLANTATION',		'LEU_FOOD_MARKET_FOOD_TRADE'),
		('IMPROVEMENT_PLANTATION',		'LEU_BREWERY_GOLD_TRADE'),
		('IMPROVEMENT_PLANTATION',		'LEU_RIVER_PORT_GOLD_TRADE'),
		('IMPROVEMENT_PLANTATION',		'LEU_SHOPPING_MALL_GOLD_TRADE'),
		--
		('IMPROVEMENT_PASTURE',			'LEU_GRANARY_PRODUCTION_TRADE'),
		('IMPROVEMENT_PASTURE',			'LEU_WATER_MILL_PRODUCTION_TRADE'),
		('IMPROVEMENT_PASTURE',			'LEU_FOOD_MARKET_PRODUCTION_TRADE'),
		('IMPROVEMENT_PASTURE',			'LEU_BREWERY_PRODUCTION_TRADE'),
		('IMPROVEMENT_PASTURE',			'LEU_RIVER_PORT_PRODUCTION_TRADE'),
		('IMPROVEMENT_PASTURE',			'LEU_SHOPPING_MALL_PRODUCTION_TRADE'),
		--
		('IMPROVEMENT_CAMP',			'LEU_GRANARY_FOOD_TRADE'),
		('IMPROVEMENT_CAMP',			'LEU_WATER_MILL_FOOD_TRADE'),
		('IMPROVEMENT_CAMP',			'LEU_FOOD_MARKET_FOOD_TRADE'),
		('IMPROVEMENT_CAMP',			'LEU_BREWERY_GOLD_TRADE'),
		('IMPROVEMENT_CAMP',			'LEU_RIVER_PORT_GOLD_TRADE'),
		('IMPROVEMENT_CAMP',			'LEU_SHOPPING_MALL_GOLD_TRADE'),
		--
		('IMPROVEMENT_FISHING_BOATS',	'LEU_GRANARY_FOOD_TRADE'),
		('IMPROVEMENT_FISHING_BOATS',	'LEU_WATER_MILL_FOOD_TRADE'),
		('IMPROVEMENT_FISHING_BOATS',	'LEU_FOOD_MARKET_FOOD_TRADE'),
		('IMPROVEMENT_FISHING_BOATS',	'LEU_BREWERY_GOLD_TRADE'),
		('IMPROVEMENT_FISHING_BOATS',	'LEU_RIVER_PORT_GOLD_TRADE'),
		('IMPROVEMENT_FISHING_BOATS',	'LEU_SHOPPING_MALL_GOLD_TRADE'),
		--
		('IMPROVEMENT_MINE',			'LEU_GRANARY_PRODUCTION_TRADE'),
		('IMPROVEMENT_MINE',			'LEU_WATER_MILL_PRODUCTION_TRADE'),
		('IMPROVEMENT_MINE',			'LEU_FOOD_MARKET_PRODUCTION_TRADE'),
		('IMPROVEMENT_MINE',			'LEU_BREWERY_PRODUCTION_TRADE'),
		('IMPROVEMENT_MINE',			'LEU_RIVER_PORT_PRODUCTION_TRADE'),
		('IMPROVEMENT_MINE',			'LEU_SHOPPING_MALL_PRODUCTION_TRADE'),
		--
		('IMPROVEMENT_QUARRY',			'LEU_GRANARY_PRODUCTION_TRADE'),
		('IMPROVEMENT_QUARRY',			'LEU_WATER_MILL_PRODUCTION_TRADE'),
		('IMPROVEMENT_QUARRY',			'LEU_FOOD_MARKET_PRODUCTION_TRADE'),
		('IMPROVEMENT_QUARRY',			'LEU_BREWERY_PRODUCTION_TRADE'),
		('IMPROVEMENT_QUARRY',			'LEU_RIVER_PORT_PRODUCTION_TRADE'),
		('IMPROVEMENT_QUARRY',			'LEU_SHOPPING_MALL_PRODUCTION_TRADE');
		
		
INSERT INTO Modifiers
		(ModifierId,										ModifierType,													OwnerRequirementSetId,				SubjectRequirementSetId)
VALUES	('LEU_GRANARY_FOOD_TRADE',							'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_BONUS',					'LEU_TR_HAS_GRANARY'),
		('LEU_GRANARY_PRODUCTION_TRADE',					'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_BONUS',					'LEU_TR_HAS_GRANARY'),
		--
		('LEU_BREWERY_GOLD_TRADE',							'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_BONUS',					'LEU_TR_HAS_BREWERY'),
		('LEU_BREWERY_PRODUCTION_TRADE',					'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_BONUS',					'LEU_TR_HAS_BREWERY'),
		--
		('LEU_WATER_MILL_FOOD_TRADE',						'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_BONUS_OR_STRATEGIC',	'LEU_TR_HAS_WATERMILL'),
		('LEU_WATER_MILL_PRODUCTION_TRADE',					'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_BONUS_OR_STRATEGIC',	'LEU_TR_HAS_WATERMILL'),
		--
		('LEU_RIVER_PORT_GOLD_TRADE',						'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_BONUS_OR_STRATEGIC',	'LEU_TR_HAS_RIVER_PORT'),
		('LEU_RIVER_PORT_PRODUCTION_TRADE',					'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_BONUS_OR_STRATEGIC',	'LEU_TR_HAS_RIVER_PORT'),
		--
		('LEU_FOOD_MARKET_FOOD_TRADE',						'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_ANY_RESOURCE',			'LEU_TR_HAS_FOOD_MARKET'),
		('LEU_FOOD_MARKET_PRODUCTION_TRADE',				'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_ANY_RESOURCE',			'LEU_TR_HAS_FOOD_MARKET'),
		--
		('LEU_SHOPPING_MALL_GOLD_TRADE',					'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_ANY_RESOURCE',			'LEU_TR_HAS_SHOPPING_MALL'),
		('LEU_SHOPPING_MALL_PRODUCTION_TRADE',				'MODIFIER_SINGLE_CITY_ADJUST_TRADE_ROUTE_YIELD_TO_OTHERS',		'LEU_TR_HAS_ANY_RESOURCE',			'LEU_TR_HAS_SHOPPING_MALL'),
		--
		('LEU_FOOD_MARKET_PRODUCTION_FROM_POPULATION',		'MODIFIER_SINGLE_CITY_ADJUST_CITY_YIELD_PER_POPULATION',		null,								null),
		--
		('LEU_RIVER_PORT_BONUS_FISHING_BOAT_GOLD',			'MODIFIER_CITY_PLOT_YIELDS_ADJUST_PLOT_YIELD',					null,								'LEU_HAS_BONUS_FISHING_BOATS');



INSERT INTO ModifierArguments
		(ModifierId,										Name,			Value)
VALUES	('LEU_GRANARY_FOOD_TRADE',							'YieldType',	'YIELD_FOOD'),
		('LEU_GRANARY_FOOD_TRADE',							'Amount',		0.5),
		('LEU_GRANARY_FOOD_TRADE',							'Domestic',		1),
		('LEU_GRANARY_PRODUCTION_TRADE',					'YieldType',	'YIELD_PRODUCTION'),
		('LEU_GRANARY_PRODUCTION_TRADE',					'Amount',		1),
		('LEU_GRANARY_PRODUCTION_TRADE',					'Domestic',		1),
		--
		('LEU_BREWERY_GOLD_TRADE',							'YieldType',	'YIELD_GOLD'),
		('LEU_BREWERY_GOLD_TRADE',							'Amount',		1),
		('LEU_BREWERY_GOLD_TRADE',							'Domestic',		1),
		('LEU_BREWERY_PRODUCTION_TRADE',					'YieldType',	'YIELD_PRODUCTION'),
		('LEU_BREWERY_PRODUCTION_TRADE',					'Amount',		1),
		('LEU_BREWERY_PRODUCTION_TRADE',					'Domestic',		1),
		--
		('LEU_WATER_MILL_FOOD_TRADE',						'YieldType',	'YIELD_FOOD'),
		('LEU_WATER_MILL_FOOD_TRADE',						'Amount',		0.5),
		('LEU_WATER_MILL_FOOD_TRADE',						'Domestic',		1),
		('LEU_WATER_MILL_PRODUCTION_TRADE',					'YieldType',	'YIELD_PRODUCTION'),
		('LEU_WATER_MILL_PRODUCTION_TRADE',					'Amount',		1),
		('LEU_WATER_MILL_PRODUCTION_TRADE',					'Domestic',		1),
		--
		('LEU_RIVER_PORT_GOLD_TRADE',						'YieldType',	'YIELD_GOLD'),
		('LEU_RIVER_PORT_GOLD_TRADE',						'Amount',		1),
		('LEU_RIVER_PORT_GOLD_TRADE',						'Domestic',		1),
		('LEU_RIVER_PORT_PRODUCTION_TRADE',					'YieldType',	'YIELD_PRODUCTION'),
		('LEU_RIVER_PORT_PRODUCTION_TRADE',					'Amount',		1),
		('LEU_RIVER_PORT_PRODUCTION_TRADE',					'Domestic',		1),
		--
		('LEU_FOOD_MARKET_FOOD_TRADE',						'YieldType',	'YIELD_FOOD'),
		('LEU_FOOD_MARKET_FOOD_TRADE',						'Amount',		0.5),
		('LEU_FOOD_MARKET_FOOD_TRADE',						'Domestic',		1),
		('LEU_FOOD_MARKET_PRODUCTION_TRADE',				'YieldType',	'YIELD_PRODUCTION'),
		('LEU_FOOD_MARKET_PRODUCTION_TRADE',				'Amount',		1),
		('LEU_FOOD_MARKET_PRODUCTION_TRADE',				'Domestic',		1),
		--
		('LEU_SHOPPING_MALL_GOLD_TRADE',					'YieldType',	'YIELD_GOLD'),
		('LEU_SHOPPING_MALL_GOLD_TRADE',					'Amount',		1),
		('LEU_SHOPPING_MALL_GOLD_TRADE',					'Domestic',		1),
		('LEU_SHOPPING_MALL_PRODUCTION_TRADE',				'YieldType',	'YIELD_GOLD'),
		('LEU_SHOPPING_MALL_PRODUCTION_TRADE',				'Amount',		1),
		('LEU_SHOPPING_MALL_PRODUCTION_TRADE',				'Domestic',		1),
		--
		('LEU_FOOD_MARKET_PRODUCTION_FROM_POPULATION',		'YieldType',	'YIELD_PRODUCTION'),
		('LEU_FOOD_MARKET_PRODUCTION_FROM_POPULATION',		'Amount',		0.25),
		--
		('LEU_RIVER_PORT_BONUS_FISHING_BOAT_GOLD',			'YieldType',	'YIELD_GOLD'),
		('LEU_RIVER_PORT_BONUS_FISHING_BOAT_GOLD',			'Amount',		1);
		--
		

INSERT INTO RequirementSets
		(RequirementSetId,						RequirementSetType)
VALUES	('LEU_TR_HAS_BONUS',					'REQUIREMENTSET_TEST_ALL'),
		('LEU_TR_HAS_BONUS_OR_STRATEGIC',		'REQUIREMENTSET_TEST_ANY'),
		('LEU_TR_HAS_ANY_RESOURCE',				'REQUIREMENTSET_TEST_ALL'),
		('LEU_TR_HAS_GRANARY',					'REQUIREMENTSET_TEST_ALL'),
		('LEU_TR_HAS_BREWERY',					'REQUIREMENTSET_TEST_ALL'),
		('LEU_TR_HAS_WATERMILL',				'REQUIREMENTSET_TEST_ALL'),
		('LEU_TR_HAS_RIVER_PORT',				'REQUIREMENTSET_TEST_ALL'),
		('LEU_TR_HAS_FOOD_MARKET',				'REQUIREMENTSET_TEST_ALL'),
		('LEU_TR_HAS_SHOPPING_MALL',			'REQUIREMENTSET_TEST_ALL'),
		('LEU_HAS_BONUS_FISHING_BOATS',			'REQUIREMENTSET_TEST_ALL');
		
INSERT INTO RequirementSetRequirements
		(RequirementSetId,					RequirementId)
VALUES	('LEU_TR_HAS_BONUS',				'REQUIRES_PLOT_HAS_BONUS'),
		('LEU_TR_HAS_BONUS_OR_STRATEGIC',	'REQUIRES_PLOT_HAS_BONUS'),
		('LEU_TR_HAS_BONUS_OR_STRATEGIC',	'REQUIRES_PLOT_HAS_STRATEGIC'),
		('LEU_TR_HAS_ANY_RESOURCE',			'REQUIRES_PLOT_HAS_VISIBLE_RESOURCE'),
		--
		('LEU_TR_HAS_GRANARY',				'REQUIRES_LEU_TR_HAS_GRANARY'),
		('LEU_TR_HAS_BREWERY',				'REQUIRES_LEU_TR_HAS_BREWERY'),
		('LEU_TR_HAS_WATERMILL',			'REQUIRES_LEU_TR_HAS_WATER_MILL'),
		('LEU_TR_HAS_RIVER_PORT',			'REQUIRES_LEU_TR_HAS_RIVER_PORT'),
		('LEU_TR_HAS_FOOD_MARKET',			'REQUIRES_LEU_TR_HAS_FOOD_MARKET'),
		('LEU_TR_HAS_SHOPPING_MALL',		'REQUIRES_LEU_TR_HAS_SHOPPING_MALL'),
		--
		('LEU_HAS_BONUS_FISHING_BOATS',		'REQUIRES_PLOT_HAS_BONUS'),
		('LEU_HAS_BONUS_FISHING_BOATS',		'REQUIRES_PLOT_HAS_FISHINGBOATS');
		

INSERT INTO Requirements
		(RequirementId,							RequirementType,								Inverse)
VALUES	('REQUIRES_LEU_TR_HAS_GRANARY',			'REQUIREMENT_CITY_HAS_BUILDING',				0),
		('REQUIRES_LEU_TR_HAS_BREWERY',			'REQUIREMENT_CITY_HAS_BUILDING',				0),
		('REQUIRES_LEU_TR_HAS_WATER_MILL',		'REQUIREMENT_CITY_HAS_BUILDING',				0),
		('REQUIRES_LEU_TR_HAS_RIVER_PORT',		'REQUIREMENT_CITY_HAS_BUILDING',				0),
		('REQUIRES_LEU_TR_HAS_FOOD_MARKET',		'REQUIREMENT_CITY_HAS_BUILDING',				0),
		('REQUIRES_LEU_TR_HAS_SHOPPING_MALL',	'REQUIREMENT_CITY_HAS_BUILDING',				0),
		('REQUIRES_LEU_TR_HAS_NO_LUXURY',		'REQUIREMENT_PLOT_RESOURCE_CLASS_TYPE_MATCHES',	1);
		
INSERT INTO RequirementArguments
		(RequirementId,									Name,						Value)
VALUES	('REQUIRES_LEU_TR_HAS_GRANARY',					'BuildingType',				'BUILDING_GRANARY'),
		('REQUIRES_LEU_TR_HAS_BREWERY',					'BuildingType',				'BUILDING_LEU_BREWERY'),
		('REQUIRES_LEU_TR_HAS_WATER_MILL',				'BuildingType',				'BUILDING_WATER_MILL'),
		('REQUIRES_LEU_TR_HAS_RIVER_PORT',				'BuildingType',				'BUILDING_LEU_RIVER_PORT'),
		('REQUIRES_LEU_TR_HAS_FOOD_MARKET',				'BuildingType',				'BUILDING_FOOD_MARKET'),
		('REQUIRES_LEU_TR_HAS_SHOPPING_MALL',			'BuildingType',				'BUILDING_SHOPPING_MALL'),
		('REQUIRES_LEU_TR_HAS_NO_LUXURY',				'ResourceClassType',		'RESOURCECLASS_LUXURY');



--=============================================================================================================================
--=============================================================================================================================
