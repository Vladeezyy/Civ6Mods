/*
	Knight of the Flaming Rose Unit
	Author: iPlayGamesITA
	Original template by: MC
	Thanks to everyone in the Civ VI Modding Helpline Discord Server!
*/

-----------------------------------------------
-- Types and Tags
-----------------------------------------------	
INSERT INTO Types
		(Type,									Kind			)
VALUES	('PROMOTION_CLASS_FLAMING_ROSE',		'KIND_PROMOTION_CLASS'	),
		('UNIT_FLAMING_ROSE_KNIGHT',			'KIND_UNIT'		),
		('ABILITY_FLAMING_ROSE_SHRINE',			'KIND_ABILITY'	),
		('ABILITY_FLAMING_ROSE_TEMPLE',			'KIND_ABILITY'	),
		('ABILITY_FLAMING_ROSE_WORSHIP',		'KIND_ABILITY'	);
	
INSERT INTO Tags
		(Tag,						Vocabulary		)
VALUES	('CLASS_FLAMING_ROSE',		'ABILITY_CLASS'	);
		
INSERT INTO TypeTags
		(Type,								Tag						)
VALUES	('UNIT_FLAMING_ROSE_KNIGHT',		'CLASS_FLAMING_ROSE'	),
		('UNIT_FLAMING_ROSE_KNIGHT',		'CLASS_MELEE'			),
		('UNIT_FLAMING_ROSE_KNIGHT',		'CLASS_ALL_ERAS'		),
		('ABILITY_FLAMING_ROSE_SHRINE',		'CLASS_FLAMING_ROSE'	),
		('ABILITY_FLAMING_ROSE_TEMPLE',		'CLASS_FLAMING_ROSE'	),
		('ABILITY_FLAMING_ROSE_WORSHIP',	'CLASS_FLAMING_ROSE'	);
-----------------------------------------------
-- Units
-----------------------------------------------
INSERT INTO Units
		(UnitType,						Name,									Description,									TraitType,									BaseSightRange,		BaseMoves,	Combat,		Cost,	ZoneOfControl,	Domain,				FormationClass,						AllowBarbarians,	PromotionClass,						LeaderType,									PurchaseYield,	MustPurchase,	Maintenance,	AdvisorType,		CostProgressionModel,				CostProgressionParam1	)
VALUES	('UNIT_FLAMING_ROSE_KNIGHT',	'LOC_UNIT_FLAMING_ROSE_KNIGHT_NAME',	'LOC_UNIT_FLAMING_ROSE_KNIGHT_DESCRIPTION',		'MINOR_CIV_IPG_LANDS_ORDER_MINOR_TRAIT',	2,					2,			25,			160,	1,				'DOMAIN_LAND',		'FORMATION_CLASS_LAND_COMBAT',		0,					'PROMOTION_CLASS_FLAMING_ROSE',		'LEADER_MINOR_CIV_IPG_LANDS_ORDER_MINOR',	'YIELD_FAITH',	1,				0,				'ADVISOR_CONQUEST',	'COST_PROGRESSION_GAME_PROGRESS',	400						);
-----------------------------------------------
-- UnitPromotionClasses
-----------------------------------------------
INSERT INTO UnitPromotionClasses
		(PromotionClassType,				Name		)
VALUES	('PROMOTION_CLASS_FLAMING_ROSE',	'LOC_PROMOTION_CLASS_FLAMING_ROSE_NAME'	);
-----------------------------------------------
-- UnitAiInfos
-----------------------------------------------
INSERT INTO UnitAiInfos (UnitType,	AiType)
SELECT 	'UNIT_FLAMING_ROSE_KNIGHT',		AiType
FROM 	UnitAiInfos
WHERE 	UnitType = 'UNIT_SWORDSMAN';
-----------------------------------------------
-- UnitAbilities
-----------------------------------------------
INSERT INTO UnitAbilities
		(UnitAbilityType,					Inactive,	Permanent,	Name,										Description										)
VALUES	('ABILITY_FLAMING_ROSE_SHRINE',		1,			1,			'LOC_ABILITY_FLAMING_ROSE_SHRINE_NAME',		'LOC_ABILITY_FLAMING_ROSE_SHRINE_DESCRIPTION'	),
		('ABILITY_FLAMING_ROSE_TEMPLE',		1,			1,			'LOC_ABILITY_FLAMING_ROSE_TEMPLE_NAME',		'LOC_ABILITY_FLAMING_ROSE_TEMPLE_DESCRIPTION'	),
		('ABILITY_FLAMING_ROSE_WORSHIP',	1,			1,			'LOC_ABILITY_FLAMING_ROSE_WORSHIP_NAME',	'LOC_ABILITY_FLAMING_ROSE_WORSHIP_DESCRIPTION'	);

INSERT INTO UnitAbilityModifiers
        (UnitAbilityType,						ModifierId							)
VALUES	('ABILITY_FLAMING_ROSE_SHRINE',			'FLAMING_ROSE_SHRINE_STRENGTH'		),
		('ABILITY_FLAMING_ROSE_TEMPLE',			'FLAMING_ROSE_TEMPLE_STRENGTH'		),
		('ABILITY_FLAMING_ROSE_WORSHIP',		'FLAMING_ROSE_WORSHIP_STRENGTH'		);
-----------------------------------------------------------------------------------
-- Modifiers
-----------------------------------------------------------------------------------
INSERT INTO Modifiers
		(ModifierId,							ModifierType							)
VALUES	('FLAMING_ROSE_SHRINE_STRENGTH',		'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH'	),
		('FLAMING_ROSE_TEMPLE_STRENGTH',		'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH'	),
		('FLAMING_ROSE_WORSHIP_STRENGTH',		'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH'	);

INSERT INTO ModifierArguments
		(ModifierId,							Name,			Value	)
VALUES	('FLAMING_ROSE_SHRINE_STRENGTH',		'Amount',		'10'	),
		('FLAMING_ROSE_TEMPLE_STRENGTH',		'Amount',		'10'	),
		('FLAMING_ROSE_WORSHIP_STRENGTH',		'Amount',		'10'	);
-----------------------------------------------------------------------------------
-- FLAMING ROSE SPECIFICS
-----------------------------------------------------------------------------------	
INSERT INTO BuildingModifiers
		(BuildingType,					ModifierId					)
VALUES	('BUILDING_SHRINE',				'FLAMING_ROSE_SHRINE_ABILITY_GRANT'	),
		('BUILDING_TEMPLE',				'FLAMING_ROSE_TEMPLE_ABILITY_GRANT'	),
		('BUILDING_CATHEDRAL',			'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	),
		('BUILDING_DAR_E_MEHR',			'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	),
		('BUILDING_GURDWARA',			'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	),
		('BUILDING_MEETING_HOUSE',		'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	),
		('BUILDING_MOSQUE',				'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	),
		('BUILDING_PAGODA',				'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	),
		('BUILDING_STUPA',				'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	),
		('BUILDING_SYNAGOGUE',			'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	),
		('BUILDING_WAT',				'FLAMING_ROSE_WORSHIP_ABILITY_GRANT'	);

INSERT INTO Modifiers
		(ModifierId,									ModifierType							)
VALUES	('FLAMING_ROSE_SHRINE_ABILITY_GRANT',			'MODIFIER_PLAYER_UNITS_GRANT_ABILITY'	),
		('FLAMING_ROSE_TEMPLE_ABILITY_GRANT',			'MODIFIER_PLAYER_UNITS_GRANT_ABILITY'	),
		('FLAMING_ROSE_WORSHIP_ABILITY_GRANT',			'MODIFIER_PLAYER_UNITS_GRANT_ABILITY'	);

INSERT INTO ModifierArguments
		(ModifierId,									Name,					Value								)
VALUES	('FLAMING_ROSE_SHRINE_ABILITY_GRANT',			'AbilityType',			'ABILITY_FLAMING_ROSE_SHRINE'		),
		('FLAMING_ROSE_TEMPLE_ABILITY_GRANT',			'AbilityType',			'ABILITY_FLAMING_ROSE_TEMPLE'		),
		('FLAMING_ROSE_WORSHIP_ABILITY_GRANT',			'AbilityType',			'ABILITY_FLAMING_ROSE_WORSHIP'		);

INSERT INTO ModifierStrings
		(ModifierId,								Context,		Text													)
VALUES	('FLAMING_ROSE_SHRINE_STRENGTH',			'Preview',		'+{1_Amount} {LOC_ABILITY_FLAMING_ROSE_SHRINE_NAME}'	),
		('FLAMING_ROSE_TEMPLE_STRENGTH',			'Preview',		'+{1_Amount} {LOC_ABILITY_FLAMING_ROSE_TEMPLE_NAME}'	),
		('FLAMING_ROSE_WORSHIP_STRENGTH',			'Preview',		'+{1_Amount} {LOC_ABILITY_FLAMING_ROSE_WORSHIP_NAME}'	);
-----------------------------------------------------------------------------------
-- FLAMING ROSE PROMOTIONS
-----------------------------------------------------------------------------------
INSERT INTO Types
		(Type,											Kind				)
VALUES	('PROMOTION_FLAMING_ROSE_PRIEST',				'KIND_PROMOTION'	),
		('PROMOTION_FLAMING_ROSE_INQUISITOR',			'KIND_PROMOTION'	),
		('PROMOTION_FLAMING_ROSE_CONGREGATION',			'KIND_PROMOTION'	),
		('PROMOTION_FLAMING_ROSE_EXCOMMUNICATION',		'KIND_PROMOTION'	),
		('PROMOTION_FLAMING_ROSE_TEMPLE_GUARD',			'KIND_PROMOTION'	);

INSERT INTO UnitPromotions
		(UnitPromotionType,							Name,												Description,												Level,	Column,	PromotionClass						)
VALUES	('PROMOTION_FLAMING_ROSE_PRIEST',			'LOC_PROMOTION_FLAMING_ROSE_PRIEST_NAME',			'LOC_PROMOTION_FLAMING_ROSE_PRIEST_DESCRIPTION',			1,		1,		'PROMOTION_CLASS_FLAMING_ROSE'	),
		('PROMOTION_FLAMING_ROSE_INQUISITOR',		'LOC_PROMOTION_FLAMING_ROSE_INQUISITOR_NAME',		'LOC_PROMOTION_FLAMING_ROSE_INQUISITOR_DESCRIPTION',		1,		3,		'PROMOTION_CLASS_FLAMING_ROSE'	),
		('PROMOTION_FLAMING_ROSE_CONGREGATION',		'LOC_PROMOTION_FLAMING_ROSE_CONGREGATION_NAME',		'LOC_PROMOTION_FLAMING_ROSE_CONGREGATION_DESCRIPTION',		2,		1,		'PROMOTION_CLASS_FLAMING_ROSE'	),
		('PROMOTION_FLAMING_ROSE_EXCOMMUNICATION',	'LOC_PROMOTION_FLAMING_ROSE_EXCOMMUNICATION_NAME',	'LOC_PROMOTION_FLAMING_ROSE_EXCOMMUNICATION_DESCRIPTION',	2,		3,		'PROMOTION_CLASS_FLAMING_ROSE'	),
		('PROMOTION_FLAMING_ROSE_TEMPLE_GUARD',		'LOC_PROMOTION_FLAMING_ROSE_TEMPLE_GUARD_NAME',		'LOC_PROMOTION_FLAMING_ROSE_TEMPLE_GUARD_DESCRIPTION',		3,		2,		'PROMOTION_CLASS_FLAMING_ROSE'	);

INSERT INTO UnitPromotionPrereqs
		(UnitPromotion,								PrereqUnitPromotion							)
VALUES	('PROMOTION_FLAMING_ROSE_CONGREGATION',		'PROMOTION_FLAMING_ROSE_PRIEST'				),
		('PROMOTION_FLAMING_ROSE_CONGREGATION',		'PROMOTION_FLAMING_ROSE_INQUISITOR'			),
		('PROMOTION_FLAMING_ROSE_EXCOMMUNICATION',	'PROMOTION_FLAMING_ROSE_PRIEST'				),
		('PROMOTION_FLAMING_ROSE_EXCOMMUNICATION',	'PROMOTION_FLAMING_ROSE_INQUISITOR'			),
		('PROMOTION_FLAMING_ROSE_TEMPLE_GUARD',		'PROMOTION_FLAMING_ROSE_CONGREGATION'		),
		('PROMOTION_FLAMING_ROSE_TEMPLE_GUARD',		'PROMOTION_FLAMING_ROSE_EXCOMMUNICATION'	);

---------- MODIFIERS
INSERT INTO UnitPromotionModifiers
		(UnitPromotionType,								ModifierId						)
VALUES	('PROMOTION_FLAMING_ROSE_PRIEST',				'FLAMING_ROSE_VICTORY_SPREAD'	),
		('PROMOTION_FLAMING_ROSE_INQUISITOR',			'FLAMING_ROSE_VICTORY_FAITH'	),
		('PROMOTION_FLAMING_ROSE_CONGREGATION',			'FLAMING_ROSE_MEDIC'			),
		('PROMOTION_FLAMING_ROSE_EXCOMMUNICATION',		'FLAMING_ROSE_IGNORE_DAMAGE'	),
		('PROMOTION_FLAMING_ROSE_TEMPLE_GUARD',			'FLAMING_ROSE_TEMPLE_GUARD'		);

INSERT INTO Modifiers
		(ModifierId,							ModifierType,										SubjectRequirementSetId		)
VALUES	('FLAMING_ROSE_VICTORY_SPREAD',			'MODIFIER_PLAYER_UNIT_ADJUST_LAND_VICTORY_SPREAD',	null						),
		('FLAMING_ROSE_VICTORY_FAITH',			'MODIFIER_UNIT_ADJUST_POST_COMBAT_YIELD',			null						),
		('FLAMING_ROSE_MEDIC',					'MODIFIER_PLAYER_UNITS_ADJUST_HEAL_PER_TURN',		'MEDIC_HEALING_REQUIREMENTS'),
		('FLAMING_ROSE_IGNORE_DAMAGE',			'MODIFIER_PLAYER_UNIT_ADJUST_NO_REDUCTION_DAMAGE',	null						),
		('FLAMING_ROSE_TEMPLE_GUARD',			'MODIFIER_UNIT_ADJUST_COMBAT_STRENGTH',				'FLAMING_ROSE_TEMPLE_REQUIREMENTS'	);

INSERT INTO ModifierArguments
		(ModifierId,							Name,					Value		)
VALUES	('FLAMING_ROSE_VICTORY_SPREAD',			'LandVictorySpread',	1			),
		('FLAMING_ROSE_VICTORY_FAITH',		'PercentDefeatedStrength',	50			),
		('FLAMING_ROSE_VICTORY_FAITH',			'YieldType',		'YIELD_FAITH'	),
		('FLAMING_ROSE_MEDIC',					'Amount',				20			),
		('FLAMING_ROSE_MEDIC',					'Type',					'ALL'		),
		('FLAMING_ROSE_IGNORE_DAMAGE',			'NoReduction',			1			),
		('FLAMING_ROSE_TEMPLE_GUARD',			'Amount',				15			);

INSERT INTO ModifierStrings
		(ModifierId,						Context,		Text															)
VALUES	('FLAMING_ROSE_TEMPLE_GUARD',		'Preview',		'+{1_Amount} {LOC_PROMOTION_FLAMING_ROSE_TEMPLE_GUARD_NAME}'	);


---------- REQUIREMENTS
INSERT INTO RequirementSets
		(RequirementSetId,						RequirementSetType			)
VALUES	('FLAMING_ROSE_TEMPLE_REQUIREMENTS',	'REQUIREMENTSET_TEST_ALL'	);

INSERT INTO RequirementSetRequirements
		(RequirementSetId,						RequirementId					)
VALUES	('FLAMING_ROSE_TEMPLE_REQUIREMENTS',	'FLAMING_ROSE_TEMPLE_ADJACENT'	);

INSERT INTO Requirements
		(RequirementId,						RequirementType										)
VALUES	('FLAMING_ROSE_TEMPLE_ADJACENT',	'REQUIREMENT_PLOT_ADJACENT_BUILDING_TYPE_MATCHES'	);

INSERT INTO RequirementArguments
		(RequirementId,						Name,				Value				)
VALUES	('FLAMING_ROSE_TEMPLE_ADJACENT',	'BuildingType',		'BUILDING_TEMPLE'	);