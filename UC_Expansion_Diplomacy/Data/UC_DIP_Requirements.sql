-- UC_DIP_Requirements
-- Author: JNR
--------------------------------------------------------------

-- Requirements
--------------------------------------------------------------
INSERT OR IGNORE INTO Requirements
		(RequirementId,												RequirementType)
VALUES	('REQUIRES_CITY_HAS_CONSULATE_SPIES',						'REQUIREMENT_CITY_HAS_BUILDING'),
		('REQUIRES_CITY_HAS_CONSULATE_CITYSTATES',					'REQUIREMENT_CITY_HAS_BUILDING'),
		('REQUIRES_CITY_HAS_CHANCERY_SPIES',						'REQUIREMENT_CITY_HAS_BUILDING'),
		('REQUIRES_CITY_HAS_CHANCERY_CITYSTATES',					'REQUIREMENT_CITY_HAS_BUILDING'),
		('REQUIRES_PLAYER_HAS_CONSULATE_JNR',						'REQUIREMENT_PLAYER_HAS_BUILDING'),
		('REQUIRES_PLAYER_HAS_CHANCERY_JNR',						'REQUIREMENT_PLAYER_HAS_BUILDING'),
		('REQUIRES_PLAYER_HAS_CHANCERY_CITYSTATES_JNR',				'REQUIREMENT_PLAYER_HAS_BUILDING'),
		('UNIT_HAS_CHAMBER_OF_COMMERCE_ABILITY_JNR',				'REQUIREMENT_UNIT_HAS_ABILITY'),
		('REQUIRES_OWNER_TILE_JNR',									'REQUIREMENT_PLOT_ADJACENT_TO_OWNER');

INSERT OR IGNORE INTO Requirements
		(RequirementId,												RequirementType)
SELECT	'REQUIRES_CITY_HAS_' || SUBSTR(DistrictType,10) || '_JNR',	'REQUIREMENT_CITY_HAS_DISTRICT'
FROM	District_GreatPersonPoints
WHERE	DistrictType IN (SELECT DistrictType FROM Districts WHERE TraitType IS NULL);

INSERT OR IGNORE INTO Requirements
		(RequirementId,												RequirementType)
SELECT	'REQUIRES_PLAYER_IS_' || SUBSTR(EraType, 5) || '_ERA_JNR',	'REQUIREMENT_PLAYER_ERA_AT_LEAST'
FROM	Eras
WHERE	ChronologyIndex >= (SELECT ChronologyIndex FROM Eras where EraType='ERA_MEDIEVAL');
--------------------------------------------------------------

-- RequirementArguments
--------------------------------------------------------------
INSERT OR IGNORE INTO RequirementArguments
		(RequirementId,												Name,				Value)
VALUES	('REQUIRES_CITY_HAS_CONSULATE_SPIES',						'BuildingType',		'BUILDING_JNR_CONSULATE_SPIES'),
		('REQUIRES_CITY_HAS_CONSULATE_CITYSTATES',					'BuildingType',		'BUILDING_JNR_CONSULATE_CITYSTATES'),
		('REQUIRES_CITY_HAS_CHANCERY_SPIES',						'BuildingType',		'BUILDING_JNR_CHANCERY_SPIES'),
		('REQUIRES_CITY_HAS_CHANCERY_CITYSTATES',					'BuildingType',		'BUILDING_JNR_CHANCERY_CITYSTATES'),
		('REQUIRES_PLAYER_HAS_CONSULATE_JNR',						'BuildingType',		'BUILDING_CONSULATE'),
		('REQUIRES_PLAYER_HAS_CHANCERY_JNR',						'BuildingType',		'BUILDING_CHANCERY'),
		('REQUIRES_PLAYER_HAS_CHANCERY_CITYSTATES_JNR',				'BuildingType',		'BUILDING_JNR_CHANCERY_CITYSTATES'),
		('UNIT_HAS_CHAMBER_OF_COMMERCE_ABILITY_JNR',				'UnitAbilityType',	'ABILITY_JNR_CHAMBER_OF_COMMERCE_TRADE_GPP'),
		('REQUIRES_OWNER_TILE_JNR',									'MinDistance',		0),
		('REQUIRES_OWNER_TILE_JNR',									'MaxDistance',		0);

INSERT OR IGNORE INTO RequirementArguments
		(RequirementId,												Name,			Value)
SELECT	'REQUIRES_CITY_HAS_' || SUBSTR(DistrictType,10) || '_JNR',	'DistrictType',	DistrictType
FROM	District_GreatPersonPoints
WHERE	DistrictType IN (SELECT DistrictType FROM Districts WHERE TraitType IS NULL);

INSERT OR IGNORE INTO RequirementArguments
		(RequirementId,												Name,			Value)
SELECT	'REQUIRES_PLAYER_IS_' || SUBSTR(EraType, 5) || '_ERA_JNR',	'EraType',		EraType
FROM	Eras
WHERE	ChronologyIndex >= (SELECT ChronologyIndex FROM Eras where EraType='ERA_MEDIEVAL');
--------------------------------------------------------------

-- RequirementSets
--------------------------------------------------------------
INSERT OR IGNORE INTO RequirementSets
		(RequirementSetId,															RequirementSetType)
VALUES	('BUILDING_IS_DIPLOMATIC_TIER1_JNR',										'REQUIREMENTSET_TEST_ALL'),
		('BUILDING_IS_DIPLOMATIC_TIER2_JNR',										'REQUIREMENTSET_TEST_ALL'),
		('PLAYER_HAS_CONSULATE_JNR',												'REQUIREMENTSET_TEST_ALL'),
		('HOSTILE_EMERGENCY_MEMBER_CHANCERY_REQUIREMENSTS_JNR',						'REQUIREMENTSET_TEST_ALL'),
		('HOSTILE_EMERGENCY_TARGET_CHANCERY_REQUIREMENSTS_JNR',						'REQUIREMENTSET_TEST_ALL'),
		('SCORED_COMPETITION_CHANCERY_REQUIREMENSTS_JNR',							'REQUIREMENTSET_TEST_ALL'),
		('PLAYER_HAS_CHANCERY_CITYSTATES_JNR',										'REQUIREMENTSET_TEST_ALL'),
		('CHAMBER_OF_COMMERCE_REQUIREMENTS_JNR',									'REQUIREMENTSET_TEST_ALL');
		
INSERT OR IGNORE INTO RequirementSets
		(RequirementSetId,															RequirementSetType)
SELECT 'CHAMBER_OF_COMMERCE_' || SUBSTR(DistrictType,10) || '_REQUIREMENTS_JNR',	'REQUIREMENTSET_TEST_ALL'
FROM	District_GreatPersonPoints
WHERE	DistrictType IN (SELECT DistrictType FROM Districts WHERE TraitType IS NULL);

INSERT OR IGNORE INTO RequirementSets
		(RequirementSetId,														RequirementSetType)
SELECT	'PLAYER_IS_' || SUBSTR(EraType, 5) || '_ERA_JNR',						'REQUIREMENTSET_TEST_ALL'
FROM	Eras
WHERE	ChronologyIndex >= (SELECT ChronologyIndex FROM Eras where EraType='ERA_MEDIEVAL');
--------------------------------------------------------------

-- RequirementSetRequirements
--------------------------------------------------------------
INSERT OR IGNORE INTO RequirementSetRequirements
		(RequirementSetId,															RequirementId)
VALUES	('BUILDING_IS_DIPLOMATIC_TIER1_JNR',										'REQUIRES_CITY_HAS_CONSULATE'),
		('BUILDING_IS_DIPLOMATIC_TIER1_JNR',										'REQUIRES_CITY_HAS_CONSULATE_SPIES'),
		('BUILDING_IS_DIPLOMATIC_TIER1_JNR',										'REQUIRES_CITY_HAS_CONSULATE_CITYSTATES'),
		('BUILDING_IS_DIPLOMATIC_TIER2_JNR',										'REQUIRES_CITY_HAS_CHANCERY'),
		('BUILDING_IS_DIPLOMATIC_TIER2_JNR',										'REQUIRES_CITY_HAS_CHANCERY_SPIES'),
		('BUILDING_IS_DIPLOMATIC_TIER2_JNR',										'REQUIRES_CITY_HAS_CHANCERY_CITYSTATES'),
		('PLAYER_HAS_CONSULATE_JNR',												'REQUIRES_PLAYER_HAS_CONSULATE_JNR'),
		('HOSTILE_EMERGENCY_MEMBER_CHANCERY_REQUIREMENSTS_JNR',						'REQUIRES_PLAYER_HAS_CHANCERY_JNR'),
		('HOSTILE_EMERGENCY_MEMBER_CHANCERY_REQUIREMENSTS_JNR',						'REQUIRES_PLAYER_IS_EMERGENCY_MEMBER_WITH_SCORE'),
		('HOSTILE_EMERGENCY_TARGET_CHANCERY_REQUIREMENSTS_JNR',						'REQUIRES_PLAYER_HAS_CHANCERY_JNR'),
		('HOSTILE_EMERGENCY_TARGET_CHANCERY_REQUIREMENSTS_JNR',						'REQUIRES_PLAYER_IS_EMERGENCY_TARGET'),
		('SCORED_COMPETITION_CHANCERY_REQUIREMENSTS_JNR',							'REQUIRES_PLAYER_HAS_CHANCERY_JNR'),
		('SCORED_COMPETITION_CHANCERY_REQUIREMENSTS_JNR',							'REQUIRES_PLAYER_IN_FIRST_PLACE_FOR_EMERGENCY_SCORE'),
		('PLAYER_HAS_CHANCERY_CITYSTATES_JNR',										'REQUIRES_PLAYER_HAS_CHANCERY_CITYSTATES_JNR'),
		('CHAMBER_OF_COMMERCE_REQUIREMENTS_JNR',									'UNIT_HAS_CHAMBER_OF_COMMERCE_ABILITY_JNR'),
		('CHAMBER_OF_COMMERCE_REQUIREMENTS_JNR',									'REQUIRES_OWNER_TILE_JNR');

INSERT OR IGNORE INTO RequirementSetRequirements
		(RequirementSetId,															RequirementId)
SELECT 'CHAMBER_OF_COMMERCE_' || SUBSTR(DistrictType,10) || '_REQUIREMENTS_JNR',	'REQUIRES_CITY_HAS_' || SUBSTR(DistrictType,10) || '_JNR'
FROM	District_GreatPersonPoints
WHERE	DistrictType IN (SELECT DistrictType FROM Districts WHERE TraitType IS NULL);

INSERT OR IGNORE INTO RequirementSetRequirements
		(RequirementSetId,															RequirementId)
SELECT	'PLAYER_IS_' || SUBSTR(EraType, 5) || '_ERA_JNR',							'REQUIRES_PLAYER_IS_' || SUBSTR(EraType, 5) || '_ERA_JNR'
FROM	Eras
WHERE	ChronologyIndex >= (SELECT ChronologyIndex FROM Eras where EraType='ERA_MEDIEVAL');
--------------------------------------------------------------